#!/bin/sh

error()
{
  echo "$1" 1>&2
}

# find system type
SYSDEP_SYSTYPE="`uname -s | tr '/:[A-Z]' '..[a-z]'`"
if [ $? -ne 0 ]
then
  error "fatal: could not get system type"
  exit 1
fi
export SYSDEP_SYSTYPE

# standard include path
SYSDEP_STDINC="/usr/include /usr/local/include"
case ${SYSDEP_SYSTYPE} in
  darwin) SYSDEP_STDINC="/sw/include ${SYSDEP_STDINC}";;
  sunos) SYSDEP_STDINC="/usr/sfw/include ${SYSDEP_STDINC}";;
  *)
esac
export SYSDEP_STDINC

# standard library path
SYSDEP_STDLIB="/usr/lib /usr/local/lib"
case ${SYSDEP_SYSTYPE} in
  darwin) SYSDEP_STDLIB="/sw/lib ${SYSDEP_STDLIB}";;
  sunos) SYSDEP_STDLIB="/usr/sfw/lib ${SYSDEP_STDLIB}";;
  *)
esac
export SYSDEP_STDLIB

# find system dynamic library suffix
SYSDEP_LIBSUFFIX="so"
case ${SYSDEP_SYSTYPE} in
  darwin) SYSDEP_LIBSUFFIX="dylib" ;;
  hp-ux) SYSDEP_LIBSUFFIX="sl";;
  *) ;;
esac
export SYSDEP_LIBSUFFIX

# outdir is relative to each entry in modules directory
SYSDEP_OUTDIR="../../../"
export SYSDEP_OUTDIR

# compiler
# sysdeps conf-cc preferred over project conf-cc preferred over 'cc'
SYSDEP_CC="cc"
if [ -f "../../conf-cc" ]
then
  tmp=`head -n 1 "../../conf-cc"`
  if [ ! -z "${tmp}" ]
  then
    SYSDEP_CC="${tmp}"
  fi
fi
if [ -f "../conf-cc" ]
then
  tmp=`head -n 1 "../conf-cc"`
  if [ ! -z "${tmp}" ]
  then
    SYSDEP_CC="${tmp}"
  fi
fi
export SYSDEP_CC

# scripts are relative to each entry in modules directory
SYSDEP_TRY_CONFIG_BIN=../../sd-configbin
SYSDEP_TRY_PKG_CONFIG=../../sd-pkgconfig
SYSDEP_TRY_MANUAL=../../sd-manual
SYSDEP_ERROR=../../sd-error

export SYSDEP_TRY_CONFIG_BIN
export SYSDEP_TRY_PKG_CONFIG
export SYSDEP_TRY_MANUAL
