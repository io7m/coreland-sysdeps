#!/bin/sh

error()
{
  echo "$1" 1>&2
}

# standard prelude

SYSDEP_STDINC="/usr/include /usr/local/include"
SYSDEP_STDLIB="/usr/lib /usr/local/lib"

export SYSDEP_STDINC
export SYSDEP_STDLIB

SYSDEP_SYSTYPE="`uname -s | tr '/:[A-Z]' '..[a-z]'`"
if [ $? -ne 0 ]
then
  error "fatal: could not get system type"
  exit 1
fi
export SYSDEP_SYSTYPE

# interface functions

try_config_bin()
{
  config="$1"
  flags="$2"
  ${config} ${flags} 2>/dev/null
  return $?
}

try_pkg_config()
{
  pkgname="$1"
  flags="$2"
  pkg-config ${flags} ${pkgname} 2>/dev/null
  return $?
}

try_manual_search()
{
  file="$1"
  path="$2"
  prefix="$3"

  for f in ${path}
  do
    if [ -f "${f}/${file}" ]
    then
      echo "${prefix}${f} "
      return 0
    fi
  done
  return 1
}


