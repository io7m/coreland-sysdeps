#!/bin/sh

error()
{
  echo "$1" 1>&2
}

# find system type
SYSDEP_OS="`./sd-os`"
if [ $? -ne 0 ]
then
  SYSDEP_OS="SYSDEP_OS_UNKNOWN"
fi
export SYSDEP_OS

# find system architecture
SYSDEP_ARCH="`./sd-arch`"
if [ $? -ne 0 ]
then
  SYSDEP_OS="SYSDEP_ARCH_UNKNOWN"
fi
export SYSDEP_ARCH

# standard include path
SYSDEP_STDINC="/usr/include /usr/local/include"
case ${SYSDEP_OS} in
  SYSDEP_OS_DARWIN) SYSDEP_STDINC="/sw/include ${SYSDEP_STDINC}";;
  SYSDEP_OS_SUNOS) SYSDEP_STDINC="/usr/sfw/include ${SYSDEP_STDINC}";;
  *)
esac
export SYSDEP_STDINC

# standard library path
SYSDEP_STDLIB="/usr/lib /usr/local/lib"
case ${SYSDEP_OS} in
  SYSDEP_OS_DARWIN) SYSDEP_STDLIB="/sw/lib ${SYSDEP_STDLIB}";;
  SYSDEP_OS_SUNOS) SYSDEP_STDLIB="/usr/sfw/lib ${SYSDEP_STDLIB}";;
  *)
esac
export SYSDEP_STDLIB

# find system dynamic library suffix
SYSDEP_LIBSUFFIX="so"
case ${SYSDEP_OS} in
  SYSDEP_OS_DARWIN) SYSDEP_LIBSUFFIX="dylib" ;;
  SYSDEP_OS_HPUX) SYSDEP_LIBSUFFIX="sl";;
  *) ;;
esac
export SYSDEP_LIBSUFFIX

# outdir is relative to each entry in modules directory
SYSDEP_OUTDIR="../../../"
export SYSDEP_OUTDIR

# compiler
# sysdeps conf-cc preferred over project conf-cc preferred over 'cc'
SYSDEP_CC="cc"
if [ -f "../../conf-cc" ]
then
  tmp=`head -n 1 "../../conf-cc"`
  if [ ! -z "${tmp}" ]
  then
    SYSDEP_CC="${tmp}"
  fi
fi
if [ -f "../conf-cc" ]
then
  tmp=`head -n 1 "../conf-cc"`
  if [ ! -z "${tmp}" ]
  then
    SYSDEP_CC="${tmp}"
  fi
fi
export SYSDEP_CC

# scripts are relative to each entry in modules directory
SYSDEP_TRY_CONFIG_BIN=../../sd-configman
SYSDEP_TRY_PKG_CONFIG=../../sd-configpkg
SYSDEP_TRY_MANUAL=../../sd-configman
SYSDEP_ERROR=../../sd-error

export SYSDEP_TRY_CONFIG_BIN
export SYSDEP_TRY_PKG_CONFIG
export SYSDEP_TRY_MANUAL
