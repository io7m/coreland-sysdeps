#!/bin/sh

#
# this file is only ever called by modules, so all paths must be
# relative to the module ("../../").
#

# path from module to sysdeps dir (MUST end with trailing slash)
SYSDEP_DIR_RELATIVE="../../"
export SYSDEP_DIR_RELATIVE

# outdir is relative to each entry in modules directory
SYSDEP_OUTDIR="${SYSDEP_DIR_RELATIVE}/../"
export SYSDEP_OUTDIR

SYSDEP_TRY_CONFIG_BIN=${SYSDEP_DIR_RELATIVE}/sd-configbin
SYSDEP_TRY_PKG_CONFIG=${SYSDEP_DIR_RELATIVE}/sd-configpkg
SYSDEP_TRY_MANUAL=${SYSDEP_DIR_RELATIVE}/sd-configman
SYSDEP_ERROR=${SYSDEP_DIR_RELATIVE}/sd-error

export SYSDEP_TRY_CONFIG_BIN
export SYSDEP_TRY_PKG_CONFIG
export SYSDEP_TRY_MANUAL
export SYSDEP_ERROR

# 'clean' scripts may set this variable to vastly speed up 'make clean'
if [ -z "${SYSDEP_CLEAN}" ];
then
  . ${SYSDEP_DIR_RELATIVE}/sysdep-subs;
else
  rm -f ${SYSDEP_DIR_RELATIVE}/sd-cpuidx86
  rm -f ${SYSDEP_DIR_RELATIVE}/sd-arch
  rm -f ${SYSDEP_DIR_RELATIVE}/sd-cctype
  rm -f ${SYSDEP_DIR_RELATIVE}/sd-ccversion
  rm -f ${SYSDEP_DIR_RELATIVE}/sd-main
  rm -f ${SYSDEP_DIR_RELATIVE}/sd-os
fi
