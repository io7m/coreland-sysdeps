#!/bin/sh

. "${SYSDEP_SUBS_FILE}" || exit 1

csrc_out="$1"
sysd_out="$2"

FOUND=""
file="libGL.${SYSDEP_LIBSUFFIX}"
case ${SYSDEP_OS} in
  SYSDEP_OS_DARWIN)
    if [ -f "/System/Library/Frameworks/OpenGL.framework/Versions/Current/OpenGL" ]
    then
      FOUND="/System/Library/Frameworks/OpenGL.framework/Versions/Current/OpenGL"
    fi
    ;;
  *)
    ;;
esac

for dir in ${SYSDEP_STDLIB}
do
  if [ -f "${dir}/${file}" ]
  then 
    FOUND="${FOUND} ${dir}/${file}"
  fi
done

${SYSDEP_UTIL_ECHO} '/* automatically generated - do not edit */' >> "${csrc_out}"
${SYSDEP_UTIL_ECHO} 'static const char *opengl_obj[] = {' >> "${csrc_out}"
for f in ${FOUND}
do
  ${SYSDEP_UTIL_ECHO} \"${f}\", >> "${csrc_out}"
done
${SYSDEP_UTIL_ECHO} '};' >> "${csrc_out}"

${SYSDEP_UTIL_ECHO} "opengl-obj: ${FOUND}" >> "${sysd_out}"
