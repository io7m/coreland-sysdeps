local_pre: tools
local:
local_clean: tests_clean toollink_clean
local_post: list_tests run_tests

tests_clean:
	rm -f testlist

toollink_clean:
	rm -f compile link makelib config-cc config-ld shebang make-compile \
	make-link make-makelib make-targets make-makeso make-targets targets

tools: compile link makeso makelib targets
 
compile:
	ln -s ../compile compile
link:
	ln -s ../link link
makeso:
	ln -s ../makeso makeso
makelib:
	ln -s ../makelib makelib
make-targets:
	ln -s ../make-targets make-targets
targets: make-targets
	./make-targets > targets

list_tests:
	./list-tests > testlist

run_tests:
	./run-tests -v
